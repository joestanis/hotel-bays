
YUI.add('base-core',function(Y){var O=Y.Object,L=Y.Lang,DOT=".",INITIALIZED="initialized",DESTROYED="destroyed",INITIALIZER="initializer",VALUE="value",OBJECT_CONSTRUCTOR=Object.prototype.constructor,DEEP="deep",SHALLOW="shallow",DESTRUCTOR="destructor",AttributeCore=Y.AttributeCore,_wlmix=function(r,s,wlhash){var p;for(p in s){if(wlhash[p]){r[p]=s[p];}}
return r;};function BaseCore(cfg){if(!this._BaseInvoked){this._BaseInvoked=true;Y.log('constructor called','life','base');this._initBase(cfg);}
else{Y.log('Based constructor called more than once. Ignoring duplicate calls','life','base');}}
BaseCore._ATTR_CFG=AttributeCore._ATTR_CFG.concat("cloneDefaultValue");BaseCore._ATTR_CFG_HASH=Y.Array.hash(BaseCore._ATTR_CFG);BaseCore._NON_ATTRS_CFG=["plugins"];BaseCore.NAME="baseCore";BaseCore.ATTRS={initialized:{readOnly:true,value:false},destroyed:{readOnly:true,value:false}};BaseCore.prototype={_initBase:function(config){Y.stamp(this);this._initAttribute(config);var PluginHost=Y.Plugin&&Y.Plugin.Host;if(this._initPlugins&&PluginHost){PluginHost.call(this);}
if(this._lazyAddAttrs!==false){this._lazyAddAttrs=true;}
this.name=this.constructor.NAME;this.init.apply(this,arguments);},_initAttribute:function(){AttributeCore.apply(this);},init:function(cfg){Y.log('init called','life','base');this._baseInit(cfg);return this;},_baseInit:function(cfg){this._initHierarchy(cfg);if(this._initPlugins){this._initPlugins(cfg);}
this._set(INITIALIZED,true);},destroy:function(){this._baseDestroy();return this;},_baseDestroy:function(){if(this._destroyPlugins){this._destroyPlugins();}
this._destroyHierarchy();this._set(DESTROYED,true);},_getClasses:function(){if(!this._classes){this._initHierarchyData();}
return this._classes;},_getAttrCfgs:function(){if(!this._attrs){this._initHierarchyData();}
return this._attrs;},_filterAttrCfgs:function(clazz,allCfgs){var cfgs=null,attr,attrs=clazz.ATTRS;if(attrs){for(attr in attrs){if(allCfgs[attr]){cfgs=cfgs||{};cfgs[attr]=allCfgs[attr];allCfgs[attr]=null;}}}
return cfgs;},_filterAdHocAttrs:function(allAttrs,userVals){var adHocs,nonAttrs=this._nonAttrs,attr;if(userVals){adHocs={};for(attr in userVals){if(!allAttrs[attr]&&!nonAttrs[attr]&&userVals.hasOwnProperty(attr)){adHocs[attr]={value:userVals[attr]};}}}
return adHocs;},_initHierarchyData:function(){var c=this.constructor,i,l,nonAttrsCfg,nonAttrs=(this._allowAdHocAttrs)?{}:null,classes=[],attrs=[];while(c){classes[classes.length]=c;if(c.ATTRS){attrs[attrs.length]=c.ATTRS;}
if(this._allowAdHocAttrs){nonAttrsCfg=c._NON_ATTRS_CFG;if(nonAttrsCfg){for(i=0,l=nonAttrsCfg.length;i<l;i++){nonAttrs[nonAttrsCfg[i]]=true;}}}
c=c.superclass?c.superclass.constructor:null;}
this._classes=classes;this._nonAttrs=nonAttrs;this._attrs=this._aggregateAttrs(attrs);},_attrCfgHash:function(){return BaseCore._ATTR_CFG_HASH;},_aggregateAttrs:function(allAttrs){var attr,attrs,cfg,val,path,i,clone,cfgPropsHash=this._attrCfgHash(),aggAttr,aggAttrs={};if(allAttrs){for(i=allAttrs.length-1;i>=0;--i){attrs=allAttrs[i];for(attr in attrs){if(attrs.hasOwnProperty(attr)){cfg=_wlmix({},attrs[attr],cfgPropsHash);val=cfg.value;clone=cfg.cloneDefaultValue;if(val){if((clone===undefined&&(OBJECT_CONSTRUCTOR===val.constructor||L.isArray(val)))||clone===DEEP||clone===true){Y.log('Cloning default value for attribute:'+attr,'info','base');cfg.value=Y.clone(val);}else if(clone===SHALLOW){Y.log('Merging default value for attribute:'+attr,'info','base');cfg.value=Y.merge(val);}}
path=null;if(attr.indexOf(DOT)!==-1){path=attr.split(DOT);attr=path.shift();}
aggAttr=aggAttrs[attr];if(path&&aggAttr&&aggAttr.value){O.setValue(aggAttr.value,path,val);}else if(!path){if(!aggAttr){aggAttrs[attr]=cfg;}else{if(aggAttr.valueFn&&VALUE in cfg){aggAttr.valueFn=null;}
_wlmix(aggAttr,cfg,cfgPropsHash);}}}}}}
return aggAttrs;},_initHierarchy:function(userVals){var lazy=this._lazyAddAttrs,constr,constrProto,ci,ei,el,extProto,exts,classes=this._getClasses(),attrCfgs=this._getAttrCfgs(),cl=classes.length-1;for(ci=cl;ci>=0;ci--){constr=classes[ci];constrProto=constr.prototype;exts=constr._yuibuild&&constr._yuibuild.exts;if(exts){for(ei=0,el=exts.length;ei<el;ei++){exts[ei].apply(this,arguments);}}
this.addAttrs(this._filterAttrCfgs(constr,attrCfgs),userVals,lazy);if(this._allowAdHocAttrs&&ci===cl){this.addAttrs(this._filterAdHocAttrs(attrCfgs,userVals),userVals,lazy);}
if(constrProto.hasOwnProperty(INITIALIZER)){constrProto.initializer.apply(this,arguments);}
if(exts){for(ei=0;ei<el;ei++){extProto=exts[ei].prototype;if(extProto.hasOwnProperty(INITIALIZER)){extProto.initializer.apply(this,arguments);}}}}},_destroyHierarchy:function(){var constr,constrProto,ci,cl,ei,el,exts,extProto,classes=this._getClasses();for(ci=0,cl=classes.length;ci<cl;ci++){constr=classes[ci];constrProto=constr.prototype;exts=constr._yuibuild&&constr._yuibuild.exts;if(exts){for(ei=0,el=exts.length;ei<el;ei++){extProto=exts[ei].prototype;if(extProto.hasOwnProperty(DESTRUCTOR)){extProto.destructor.apply(this,arguments);}}}
if(constrProto.hasOwnProperty(DESTRUCTOR)){constrProto.destructor.apply(this,arguments);}}},toString:function(){return this.name+"["+Y.stamp(this,true)+"]";}};Y.mix(BaseCore,AttributeCore,false,null,1);BaseCore.prototype.constructor=BaseCore;Y.BaseCore=BaseCore;},'3.6.0',{requires:['attribute-core']});